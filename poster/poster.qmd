---
title: Visualizing Billion-Dollar Disasters in the USA (1980--2024)
format:
  poster-typst: 
    size: "33x23" # Approximately A1
    poster-authors: "Oh Jia Wei Darien, Peter Febrianto Afandy, Quek Joo Wee, Desmond Loy Yong Kiat, Rene Low Yi Xuan, Phileo Teo Weihan"
    departments: "SIT-UoG Computing Science"
    institution-logo: "images/sit-logo.png"
    footer-text: "CSC3107 Project (Team Oldlace)"
    footer-emails: "2200607, 2200959, 2201046, 2201435, 2202620, 2203179"
execute:
  echo: false
knitr:
  opts_chunk:
    dev: svglite
---

```{r}
#| label: setup
#| include: false

# Execute data preparations and load graphics
library(knitr)
purl("preparation.qmd")
source("preparation.R")
```

# Introduction
...

# Previous Visualization
```{r}
#| label: fig-bb-on-poster
#| fig-cap: "Frequency and Estimated Costs of Billion-Dollar Disasters in the USA by year, published by Bloomberg."
#| out-width: 100%

include_graphics("images/bb_bdd_cropped.png")
```

[^dottle_climate_2023]: <https://www.bloomberg.com/graphics/2023-fema-disaster-relief-fund-extreme-weather-climate-aid>

# Strengths
*  ...
*  ...

# Suggested Improvements
1. ...
2. ...
    
    
# Implementation
## Data
*  ...
*  ...

## Software
We used the Quarto publication framework and the R programming language, along with the following third-party packages:

*   *tidyverse* for data transformation, including *ggplot2* for visualization
    based on the grammar of graphics
*   *knitr* for dynamic document generation

# Improved Visualization
## Estimated Costs of Billion-Dollar Disasters in the USA by Year
```{r}
#| label: fig-ggplot
#| fig-width: 10
#| fig-height: 8
#| fig-cap: "Revised visualization of Estimated Costs of Billion-Dollar Disasters in the USA by year."

# Base plot
bdd_cost |>
  ggplot(aes(x = Year, y = Cost, color = Disaster)) +
  geom_line() +
  scale_color_brewer(palette = "Paired") +
  labs(
    x = "Year",
    y = "Cost (CPI-Adjusted, Billion $USD)",
    color = "Disaster Type",
    title = "Estimated Cost of Billion-Dollar Disasters in the USA (1980-2024)",
    caption = "Source: NCEI (2024)"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold", hjust = 0.5),
    plot.caption = element_text(size = 12),
    legend.title = element_text(size = 12, margin = margin(r = 12)),
    legend.text = element_text(size = 10),
    axis.title = element_text(size = 14),
    axis.title.x = element_text(margin = margin(t = 20)),
    axis.title.y = element_text(margin = margin(r = 20)),
    axis.text = element_text(size = 12),
    legend.position = "top"
  ) +
  scale_x_continuous(breaks = seq(min(bdd_cost$Year),
    max(bdd_cost$Year + 5),
    by = 5
  )) +
  scale_y_continuous(breaks = seq(0,
    max(bdd_cost$Cost + 25),
    by = 25
  ))

# Base plot (with Percentage Cost as an intensive variable)
bdd_cost |>
  ggplot(aes(x = Year, y = PercentageCost, color = Disaster)) +
  geom_line() +
  scale_color_brewer(palette = "Paired") +
  labs(
    x = "Year",
    y = "Percentage Cost (CPI-Adjusted, Billion $USD)",
    color = "Disaster Type",
    title = "Estimated Cost of Billion-Dollar Disasters in the USA (1980-2024)",
    caption = "Source: NCEI (2024)"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold", hjust = 0.5),
    plot.caption = element_text(size = 12),
    legend.title = element_text(size = 12, margin = margin(r = 12)),
    legend.text = element_text(size = 10),
    axis.title = element_text(size = 14),
    axis.title.x = element_text(margin = margin(t = 20)),
    axis.title.y = element_text(margin = margin(r = 20)),
    axis.text = element_text(size = 12),
    legend.position = "top"
  ) +
  scale_x_continuous(breaks = seq(min(bdd_cost$Year),
    max(bdd_cost$Year + 5),
    by = 5
  )) +
  scale_y_continuous(breaks = seq(0, max(bdd_cost$Cost), by = 5))
```

## Frequency of Billion-Dollar Disasters in the USA by Year
```{r}
#| label: fig-ggplot2
#| fig-width: 10
#| fig-height: 8
#| fig-cap: "Revised Visualisation of Frequency of Billion-Dollar Disasters in the USA by year."


# Create custom color palette with distinct shades
custom_palette <- c(
  "Wildfire" = "#fc9e87", # Light red
  "Drought" = "#fb6a4a", # Dark red
  "Freeze" = "#679ad2", # Dark blue
  "Winter Storm" = "#6baed6", # Medium blue
  "Flooding" = "#a6cee3", # Light blue
  "Severe Storm" = "#7DC15A", # Darker yellow (light Green)
  "Tropical Cyclone" = "#C1F2B0" # Darker Green (dark Green)
)

bdd_events_frequency_cost$Disaster <- factor(
  bdd_events_frequency_cost$Disaster,
  levels = c(
    "Wildfire",
    "Drought",
    "Flooding",
    "Winter Storm",
    "Freeze",
    "Tropical Cyclone",
    "Severe Storm"
  )
)

# Create a stacked histogram of the frequency USA from 1980 to 2024
bdd_events_frequency_cost |> ggplot(aes(
  x = Year,
  y = Frequency,
  fill = Disaster
)) +
  geom_bar(stat = "identity") +
  labs(
    x = "Year",
    y = "Frequency of billion-dollar disaster",
    title = "Frequency of Billion-Dollar Disasters in the USA (1980-2024)",
    caption = "Source: NCEI (2024)"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold", hjust = 0.5),
    plot.caption = element_text(size = 12),
    legend.title = element_text(size = 12, margin = margin(r = 12)),
    legend.text = element_text(size = 10),
    legend.position = "top",
    axis.title = element_text(size = 14),
    axis.title.x = element_text(margin = margin(t = 20)),
    axis.title.y = element_text(margin = margin(r = 20)),
    axis.text = element_text(size = 12),
    panel.grid.major = element_line(color = "grey", linewidth = 0.5),
    panel.grid.minor = element_blank() # Hide minor grid lines
  ) +
  scale_fill_manual(
    values = custom_palette,
    breaks = c(
      "Severe Storm",
      "Tropical Cyclone",
      "Freeze",
      "Winter Storm",
      "Flooding",
      "Drought",
      "Wildfire"
    ), labels = c(
      "Severe Storm",
      "Tropical Cyclone",
      "Freeze",
      "Winter Storm",
      "Flooding",
      "Drought",
      "Wildfire"
    )
  ) +
  scale_y_continuous(
    breaks = seq(0, 30, by = 3), # Set breaks at intervals of 5
    limits = c(0, 30) # Set Y-axis limits from 0 to 30
  ) +
  guides(
    fill = guide_legend(
      title = "Disaster", # Proper title without causing NULL
      title.position = "left",
      label.position = "right",
      keywidth = unit(1, "lines"), # Set key width to match desired format
      keyheight = unit(1, "lines") # Set key height to match desired format
    )
  )
```


## Combined Plot of Costs and Frequency
```{r}
# something here
```


# Further Suggestions for Interactivity
...

# Conclusion
...
