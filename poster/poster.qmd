---
title: Visualizing Billion-Dollar Disasters in the USA (1980--2024)
format:
  poster-typst: 
    size: "33x23" # Approximately A1
    poster-authors: "Oh Jia Wei Darien, Peter Febrianto Afandy, Quek Joo Wee, Desmond Loy Yong Kiat, Rene Low Yi Xuan, Phileo Teo Weihan"
    departments: "SIT-UoG Computing Science"
    institution-logo: "images/sit-logo.png"
    footer-text: "CSC3107 Project (Team Oldlace)"
    footer-emails: "2200607, 2200959, 2201046, 2201435, 2202620, 2203179"
execute:
  echo: false
knitr:
  opts_chunk:
    dev: svglite
---

```{r}
#| label: setup
#| include: false

# Execute data preparations and load graphics
library(knitr)
purl("preparation.qmd")
source("preparation.R")
```

# Introduction
...

# Previous Visualization
```{r}
#| label: fig-bb-on-poster
#| fig-cap: "Frequency and Estimated Costs of Billion-Dollar Disasters in the USA by year, published by Bloomberg."
#| out-width: 100%

include_graphics("images/bb_bdd_cropped.png")
```

[^dottle_climate_2023]: <https://www.bloomberg.com/graphics/2023-fema-disaster-relief-fund-extreme-weather-climate-aid>

# Strengths
*  ...
*  ...

# Suggested Improvements
1. ...
2. ...
    
    
# Implementation
## Data
*  ...
*  ...

## Software
We used the Quarto publication framework and the R programming language, along with the following third-party packages:

*   *tidyverse* for data transformation, including *ggplot2* for visualization
    based on the grammar of graphics
*   *knitr* for dynamic document generation

# Improved Visualization
## Estimated Costs of Billion-Dollar Disasters in the USA by Year
```{r}
#| label: fig-ggplot
#| fig-width: 10
#| fig-height: 8
#| fig-cap: "Revised visualization of Estimated Costs of Billion-Dollar Disasters in the USA by year."

# Base plot
bdd_cost |>
  ggplot(aes(x = Year, y = Cost, color = Disaster)) +
  geom_line() +
  scale_color_brewer(palette = "Paired") +
  labs(
    x = "Year",
    y = "Cost (CPI-Adjusted, Billion $USD)",
    color = "Disaster Type",
    title = "Estimated Cost of Billion-Dollar Disasters in the USA (1980-2024)",
    caption = "Source: NCEI (2024)"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 16, face = "bold", hjust = 0.5),
    plot.caption = element_text(size = 12),
    legend.title = element_text(size = 12, margin = margin(r = 12)),
    legend.text = element_text(size = 10),
    axis.title = element_text(size = 14),
    axis.title.x = element_text(margin = margin(t = 20)),
    axis.title.y = element_text(margin = margin(r = 20)),
    axis.text = element_text(size = 12),
    legend.position = "top"
  ) +
  scale_x_continuous(breaks = seq(min(bdd_cost$Year), max(bdd_cost$Year + 5), by = 5)) +
  scale_y_continuous(breaks = seq(0, max(bdd_cost$Cost + 25), by = 25))

```

## Frequency of Billion-Dollar Disasters in the USA by Year
```{r}
#| label: stacked-histogram
#| fig_width: 10
#| fig_height: 8
#| fig-cap: "Revised Visualisation of Frequency of Billion-Dollar Disasters in the USA by year."

# Create a stacked histogram of the frequency USA
# from 1980 to 2024
hist <- ggplot(bdd_events_frequency_cost, aes(x = Year, y = `Frequency`, fill = Disaster)) +
  ggtitle("Frequency of Billion-Dollar Disasters in the USA (1980-2024)") +
  geom_bar(stat = "identity") +
  labs(
    x = "Year",
    y = "Frequency of billion-dollar disaster",
  ) +
  theme_bw() +
  theme(
    legend.position = "top",
    plot.title = element_text(hjust = 0.5),
    panel.grid.major = element_line(color = "grey", size = 0.5),
    panel.grid.minor = element_blank()  # Hide minor grid lines
  ) +
  scale_fill_brewer(palette = "Paired") +
  scale_y_continuous(
    breaks = seq(0, 30, by = 5),  # Set breaks at intervals of 5
    limits = c(0, 30)             # Set Y-axis limits from 0 to 30
  )

hist
```

## Combined Plot of Costs and Frequency
```{r}
# something here
```


# Further Suggestions for Interactivity
...

# Conclusion
...
